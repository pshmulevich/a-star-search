(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,t,a){},37:function(e,t,a){e.exports=a(64)},64:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(33),c=a.n(r),i=a(11),s=a(8),u=a(12),l=a(5),y={},d={originalNodesMap:{a:{x:100,y:100,key:"a"},b:{x:200,y:40,key:"b"},c:{x:300,y:100,key:"c"},d:{x:170,y:195,key:"d"},e:{x:200,y:179.941,key:"e"},f:{x:288.35,y:398.27,key:"f"},g:{x:99.8,y:400,key:"g"},h:{x:105.3,y:559.554,key:"h"},i:{x:400,y:70,key:"i"},j:{x:340,y:210,key:"j"},k:{x:500,y:100,key:"k"},l:{x:330,y:3.104*100,key:"l"},m:{x:477.9,y:400,key:"m"},n:{x:450,y:450,key:"n"},o:{x:570,y:4.9*100,key:"o"},p:{x:470,y:580,key:"p"},q:{x:590,y:590,key:"q"},r:{x:370,y:400,key:"r"}},originalLinks:[{sourceKey:"a",targetKey:"b"},{sourceKey:"b",targetKey:"c"},{sourceKey:"c",targetKey:"l"},{sourceKey:"b",targetKey:"d"},{sourceKey:"d",targetKey:"e"},{sourceKey:"e",targetKey:"f"},{sourceKey:"e",targetKey:"g"},{sourceKey:"g",targetKey:"h"},{sourceKey:"h",targetKey:"r"},{sourceKey:"l",targetKey:"r"},{sourceKey:"l",targetKey:"j"},{sourceKey:"l",targetKey:"m"},{sourceKey:"j",targetKey:"i"},{sourceKey:"j",targetKey:"k"},{sourceKey:"k",targetKey:"o"},{sourceKey:"o",targetKey:"m"},{sourceKey:"m",targetKey:"r"},{sourceKey:"r",targetKey:"p"},{sourceKey:"q",targetKey:"n"},{sourceKey:"p",targetKey:"q"}]},g=function(e,t){var a=Object(n.useState)(function(){try{var a=window.localStorage.getItem(e),n=a?JSON.parse(a):t;return("initialData"===e?function(e){var t=e.originalLinks.map(function(t){return t.source=e.originalNodesMap[t.sourceKey],t.target=e.originalNodesMap[t.targetKey],y["".concat(t.sourceKey,",").concat(t.targetKey)]=t,y["".concat(t.targetKey,",").concat(t.sourceKey)]=t,t});e.links=t;var a=Object.values(e.originalNodesMap).map(function(e,t){return e.index=t,e});return e.nodes=a,e}(n):null)||n}catch(o){return console.log(o),t}}),o=Object(l.a)(a,2),r=o[0],c=o[1];return[r,function(t){try{var a=t instanceof Function?t(r):t;c(a),window.localStorage.setItem(e,JSON.stringify(a))}catch(n){console.log(n)}}]},h=Object(n.createContext)(),m=function(e){var t=e.children,a=Object(n.useState)(-1),r=Object(l.a)(a,2),c=r[0],i=r[1],s=Object(n.useState)(!1),u=Object(l.a)(s,2),y=u[0],m=u[1],p=Object(n.useState)({x:0,y:0}),x=Object(l.a)(p,2),K=x[0],b=x[1],f=Object(n.useState)({x:0,y:0}),O=Object(l.a)(f,2),v=O[0],k=O[1],j=Object(n.useState)({x:0,y:0}),E=Object(l.a)(j,2),N=E[0],w=E[1],M=g("bestRoute",[]),D=Object(l.a)(M,2),S=D[0],C=D[1],F=g("initialData",d),R=Object(l.a)(F,2),T=R[0],I=R[1],q=g("zoomFactor",1),A=Object(l.a)(q,2),B=A[0],L=A[1],z=g("sourceNodeKey","a"),J=Object(l.a)(z,2),G=J[0],H=J[1],W=g("targetNodeKey","q"),X=Object(l.a)(W,2),Y=X[0],Z=X[1];return o.a.createElement(h.Provider,{value:{dragging:y,setDragging:m,coordinates:K,setCoordinates:b,origin:v,setOrigin:k,graphData:T,setGraphData:I,nodeOrigin:N,setNodeOrigin:w,activeNodeIndex:c,setActiveNodeIndex:i,bestRoute:S,setBestRoute:C,sourceNodeKey:G,setSourceNodeKey:H,targetNodeKey:Y,setTargetNodeKey:Z,zoomFactor:B,setZoomFactor:L}},t)},p=a(66),x=function(e){var t=e.node,a=Object(n.useContext)(h),r=t.index,c=t.key===a.sourceNodeKey?"green":t.key===a.targetNodeKey?"red":"#21D4FD",i=function(e){e.preventDefault();var n=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e;a.setOrigin({x:n.clientX,y:n.clientY}),a.setActiveNodeIndex(r),a.setNodeOrigin({x:t.x,y:t.y}),a.setDragging(!0)},s=function(e){a.setDragging(!1),a.setActiveNodeIndex(-1)};return o.a.createElement("g",{style:{userSelect:"none"},onTouchStart:i,onTouchEnd:s,onMouseDown:i,onMouseUp:s},o.a.createElement("circle",{r:15,fill:c}),o.a.createElement("text",{dy:2,dx:18,fill:"white",fontFamily:"arial"},"".concat(t.key," (").concat(t.x,", ").concat(t.y,")")))},K=function(e){var t=e.link;if(!t.source)return console.error("Link source does not exist",t),"";if(!t.target)return console.error("Link target does not exist",t),"";var a=(t.source.x+t.target.x)/2,n=(t.source.y+t.target.y)/2,r=t.source.x,c=t.source.y,i=t.target.x,s=t.target.y,u=Math.sqrt(Math.pow(i-r,2)+Math.pow(s-c,2)).toFixed(0);return o.a.createElement("g",null,o.a.createElement("line",{x1:r,y1:c,x2:i,y2:s,strokeWidth:2,stroke:t.color||"#999",strokeOpacity:.6}),o.a.createElement("text",{textAnchor:"middle",dy:n-4,dx:a,fill:"steelblue",fontFamily:"arial"},"".concat(t.label," (").concat(u,")")))},b=a(34),f=a.n(b),O=function(e){var t=e.width,a=e.height,r=Object(n.useContext)(h),c=r.graphData,i=r.activeNodeIndex,s=function(e,t){e.forEach(function(e){var a="".concat(e.sourceKey,",").concat(e.targetKey);y[a].color=t})},l=function(e){if(e.preventDefault(),r.dragging){var t=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,a=(t.clientX-r.origin.x)/r.zoomFactor,n=(t.clientY-r.origin.y)/r.zoomFactor,o=r.nodeOrigin.x,s=r.nodeOrigin.y;c.nodes[i].x=o+a,c.nodes[i].y=s+n,r.setGraphData(c),r.setCoordinates({x:a,y:n})}},d=r.graphData.nodes.map(function(e){return e.x}),g=r.graphData.nodes.map(function(e){return e.y}),m=Math.max.apply(Math,Object(u.a)(g))-Math.min.apply(Math,Object(u.a)(g))+200,b=Math.max.apply(Math,Object(u.a)(d))-Math.min.apply(Math,Object(u.a)(d))+200,O=Math.min(t/b,a/m);return r.setZoomFactor(O),console.log(O),o.a.createElement("div",null,o.a.createElement("button",{onClick:function(){s(r.bestRoute,void 0),r.setBestRoute([]);var e={edges:r.graphData.links,nodes:r.graphData.nodes,originNode:r.sourceNodeKey,destinationNode:r.targetNodeKey};console.log("post request to","/api/findRoute","payload:",e),f.a.post("/api/findRoute",e).then(function(e){console.log("Route data: ",e.data),s(e.data.edges,"red"),r.setBestRoute(e.data.edges)},function(e){console.error(e)})}},"Submit"),o.a.createElement("button",{onClick:function(){localStorage.clear(),window.location.reload(!1)}},"Reset"),o.a.createElement("div",null,o.a.createElement("svg",{width:t,height:a,viewBox:"0 0 ".concat(t/O," ").concat(a/O),onTouchMove:l,onMouseMove:l,onMouseLeave:function(e){e.preventDefault(),r.setDragging(!1),r.setActiveNodeIndex(-1)}},o.a.createElement("rect",{width:t/O,height:a/O,fill:"black"}),o.a.createElement(p.a,{graph:r.graphData,nodeComponent:x,linkComponent:K}))))},v=function(){var e=window.innerWidth-30,t=window.innerHeight-50;return o.a.createElement("div",{style:{width:e,height:t}},o.a.createElement(O,{width:e,height:t}))},k=a(13),j=a(14),E=a(16),N=a(15),w=a(17),M=(a(31),function(e){function t(){return Object(k.a)(this,t),Object(E.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{id:"dashboard"},o.a.createElement("div",{className:"menu"},o.a.createElement(i.b,{exact:!0,to:"/"},"Home"),o.a.createElement(i.b,{exact:!0,to:"/settings"},"Settings")),o.a.createElement("div",{className:"content"},this.props.children))}}]),t}(o.a.Component)),D=function(){Object(n.useContext)(h);return o.a.createElement("div",null,o.a.createElement("h1",null,"Settings"))},S=function(e){function t(){return Object(k.a)(this,t),Object(E.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return o.a.createElement("h1",null,"not found!")}}]),t}(o.a.Component),C=function(){return o.a.createElement("div",{id:"app"},o.a.createElement(m,null,o.a.createElement(i.a,null,o.a.createElement(M,null,o.a.createElement(s.c,null,o.a.createElement(s.a,{exact:!0,path:"/",component:v}),o.a.createElement(s.a,{exact:!0,path:"/settings",component:D}),o.a.createElement(s.a,{component:S}))))))},F=document.getElementById("root");c.a.render(o.a.createElement(C,null),F)}},[[37,1,2]]]);
//# sourceMappingURL=main.d35f3289.chunk.js.map