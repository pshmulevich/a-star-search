(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,t,a){},38:function(e,t,a){e.exports=a.p+"static/media/a-star_service.ec4b1ffd.png"},40:function(e,t,a){e.exports=a(73)},73:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(34),i=a.n(r),c=a(11),s=a(8),l=a(3),d=a(12),u={from:"a",to:"q",nodes:{a:{x:1,y:1,key:"a"},b:{x:2,y:.4,key:"b"},c:{x:3,y:1,key:"c"},d:{x:1.7,y:1.95,key:"d"},e:{x:2,y:1.79941,key:"e"},f:{x:2.8835,y:3.9827,key:"f"},g:{x:.998,y:4,key:"g"},h:{x:1.053,y:5.59554,key:"h"},i:{x:4,y:.7,key:"i"},j:{x:3.4,y:2.1,key:"j"},k:{x:5,y:1,key:"k"},l:{x:3.3,y:3.104,key:"l"},m:{x:4.779,y:4,key:"m"},n:{x:4.5,y:4.5,key:"n"},o:{x:5.7,y:4.9,key:"o"},p:{x:4.7,y:5.8,key:"p"},q:{x:5.9,y:5.9,key:"q"},r:{x:3.7,y:4,key:"r"}},edges:[{from:"a",to:"b"},{from:"b",to:"c"},{from:"c",to:"l"},{from:"b",to:"d"},{from:"d",to:"e"},{from:"e",to:"f"},{from:"e",to:"g"},{from:"g",to:"h"},{from:"h",to:"r"},{from:"l",to:"r"},{from:"l",to:"j"},{from:"l",to:"m"},{from:"j",to:"i"},{from:"j",to:"k"},{from:"k",to:"o"},{from:"o",to:"m"},{from:"m",to:"r"},{from:"r",to:"p"},{from:"q",to:"n"},{from:"p",to:"q"}]},h=function(e){return Object.values(e.nodes).forEach(function(e,t){e.x=200*e.x,e.y=200*e.y,e.index=t}),{to:e.to,from:e.from,originalNodesMap:e.nodes,originalLinks:e.edges}},m=h(u),g=function(e){var t={},a=e.originalLinks.map(function(a){return a.source=e.originalNodesMap[a.from],a.target=e.originalNodesMap[a.to],t["".concat(a.from,",").concat(a.to)]=a,t["".concat(a.to,",").concat(a.from)]=a,a});e.links=a,e.linksMap=t,e.nodes=Object.values(e.originalNodesMap);var n=e.nodes.map(function(e){return e.x}),o=e.nodes.map(function(e){return e.y});return e.graphLeft=Math.min.apply(Math,Object(d.a)(n))-150,e.graphRight=Math.max.apply(Math,Object(d.a)(n))+200,e.graphTop=Math.min.apply(Math,Object(d.a)(o))-100,e.graphBottom=Math.max.apply(Math,Object(d.a)(o))+100,e},p=function(e,t){var a=Object(n.useState)(function(){try{var a=window.localStorage.getItem(e),n=a?JSON.parse(a):t;return("initialData"===e?g(n):null)||n}catch(o){return console.log(o),t}}),o=Object(l.a)(a,2),r=o[0],i=o[1];return[r,function(t){try{var a=t instanceof Function?t(r):t;i(a),window.localStorage.setItem(e,JSON.stringify(a))}catch(n){console.log(n)}}]},f=Object(n.createContext)(),y=function(e){var t=e.children,a=Object(n.useState)(-1),r=Object(l.a)(a,2),i=r[0],c=r[1],s=Object(n.useState)(!1),d=Object(l.a)(s,2),h=d[0],g=d[1],y=Object(n.useState)({x:0,y:0}),b=Object(l.a)(y,2),x=b[0],v=b[1],E=Object(n.useState)({x:0,y:0}),k=Object(l.a)(E,2),O=k[0],j=k[1],w=Object(n.useState)({x:0,y:0}),D=Object(l.a)(w,2),S=D[0],N=D[1],M=p("bestRoute",[]),T=Object(l.a)(M,2),R=T[0],C=T[1],F=p("scenarioData",u),A=Object(l.a)(F,2),I=A[0],L=A[1],q=p("initialData",m),B=Object(l.a)(q,2),J=B[0],z=B[1],W=p("zoomFactor",1),Y=Object(l.a)(W,2),G=Y[0],U=Y[1];return o.a.createElement(f.Provider,{value:{dragging:h,setDragging:g,coordinates:x,setCoordinates:v,origin:O,setOrigin:j,graphData:J,setGraphData:z,scenarioData:I,setScenarioData:L,nodeOrigin:S,setNodeOrigin:N,activeNodeIndex:i,setActiveNodeIndex:c,bestRoute:R,setBestRoute:C,zoomFactor:G,setZoomFactor:U}},t)},b=a(75),x=function(e){var t=Object(n.useContext)(f),a=e.node,r=a.index===t.activeNodeIndex,i=t.dragging&&r,c=a.key===t.graphData.from?"green":a.key===t.graphData.to?"red":i?"orange":"#21D4FD",s=function(e){e.preventDefault();var n=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e;t.setOrigin({x:n.clientX,y:n.clientY}),t.setActiveNodeIndex(a.index),t.setNodeOrigin({x:a.x,y:a.y}),t.setDragging(!0)},l=function(e){t.setDragging(!1),t.setActiveNodeIndex(-1)};return o.a.createElement("g",{style:{userSelect:"none"},onTouchStart:s,onTouchEnd:l,onMouseDown:s,onMouseUp:l},o.a.createElement("circle",{r:i?50:25,fill:c}),o.a.createElement("text",{dy:2,dx:28,fill:"gold",fontFamily:"arial"},"".concat(a.key.toUpperCase()," (").concat((a.x/200).toFixed(2),", ").concat((a.y/200).toFixed(2),")")))},v=function(e){var t=e.link;if(!t.source)return console.error("Link source does not exist",t),"";if(!t.target)return console.error("Link target does not exist",t),"";var a=(t.source.x+t.target.x)/2,n=(t.source.y+t.target.y)/2,r=t.source.x,i=t.source.y,c=t.target.x,s=t.target.y,l=Math.sqrt(Math.pow(c-r,2)+Math.pow(s-i,2)).toFixed(0);return o.a.createElement("g",null,o.a.createElement("line",{x1:r,y1:i,x2:c,y2:s,strokeWidth:t.strokeWidth||2,stroke:t.color||"lightBlue",strokeOpacity:.6}),o.a.createElement("text",{textAnchor:"middle",dy:n-4,dx:a,fill:"steelblue",fontFamily:"arial"}," (".concat((l/200).toFixed(2),")")))},E=a(35),k=a.n(E),O="sameServer",j=O==="local"?"http://localhost:8085/api/findRoute":O==="heroku"?"https://a-star-search-demo.herokuapp.com/api/findRoute":"/api/findRoute",w=function(e){var t=e.width,a=(e.height,Object(n.useContext)(f)),r=a.graphData,i=a.activeNodeIndex,c=function(e,t,a){e.forEach(function(e){var n="".concat(e.sourceKey,",").concat(e.targetKey),o=r.linksMap[n];o.color=t,o.strokeWidth=a})},s=function(e){if(e.preventDefault(),a.dragging){var t=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,n=(t.clientX-a.origin.x)/a.zoomFactor,o=(t.clientY-a.origin.y)/a.zoomFactor,c=a.nodeOrigin.x,s=a.nodeOrigin.y;r.nodes[i].x=c+n,r.nodes[i].y=s+o,a.setGraphData(r),a.setCoordinates({x:n,y:o})}},l=function(e){e.preventDefault(),a.setDragging(!1),a.setActiveNodeIndex(-1)},d=t/(r.graphRight-r.graphLeft);return a.setZoomFactor(d),o.a.createElement("div",null,o.a.createElement("button",{onClick:function(){c(a.bestRoute,void 0,void 0),a.setBestRoute([]);var e=j,t={edges:a.graphData.links,nodes:a.graphData.nodes,originNode:a.graphData.from,destinationNode:a.graphData.to};console.log("post request to",e,"payload:",t),k.a.post(e,t).then(function(e){console.log("Route data: ",e.data),c(e.data.edges,"red",6),a.setBestRoute(e.data.edges)},function(e){console.error(e)})}},"Submit"),o.a.createElement("button",{onClick:function(){localStorage.clear(),window.location.reload(!1)}},"Reset"),o.a.createElement("div",null,o.a.createElement("svg",{viewBox:"".concat(r.graphLeft," ").concat(r.graphTop," ").concat(r.graphRight," ").concat(r.graphBottom),preserveAspectRatio:"xMinYMin slice",onTouchMove:s,onMouseMove:s,onMouseLeave:l,onMouseUp:l,onTouchEnd:l},o.a.createElement(b.a,{className:"graph",graph:a.graphData,nodeComponent:x,linkComponent:v}))))},D=function(){var e=function(){var e=Object(n.useState)({x:0,y:0}),t=Object(l.a)(e,2),a=t[0],o=t[1];return Object(n.useLayoutEffect)(function(){function e(){o({x:window.innerWidth,y:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}},[]),a}(),t=e.x,a=e.y-87;return o.a.createElement("div",{id:"home"},o.a.createElement(w,{width:t,height:a}))},S=a(13),N=a(14),M=a(16),T=a(15),R=a(17),C=(a(31),function(e){function t(){return Object(S.a)(this,t),Object(M.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{id:"dashboard"},o.a.createElement("div",{className:"menu"},o.a.createElement(c.b,{exact:!0,to:"/"},"Home"),o.a.createElement(c.b,{exact:!0,to:"/about"},"About")),o.a.createElement("div",{className:"content"},this.props.children))}}]),t}(o.a.Component)),F=a(38),A=a.n(F),I=function(){return o.a.createElement("div",{id:"about"},o.a.createElement("div",{className:"textinfo"},o.a.createElement("h2",null,"Application"),o.a.createElement("div",{className:"application"},o.a.createElement("p",null,'This application allows you to find the shortest path from the Start node (marked in green) to the End node (marked in red). When you click the "Submit" button, the program sends the search scenario to the RESTful A-star search engine to find the most cost-effective route through all of the nodes and edges and highlights the determined path in red.'),o.a.createElement("p",null,'You can click on and drag the nodes in any direction to change their positions and test the algorithm\'s capability. The node you click and hold will be enlarged and colored orange until you release it. The application will remember the last node positions unless you click the "Reset" button and the original positions will be restored.'),o.a.createElement("img",{className:"diagram",src:A.a,alt:"Diagram"})),o.a.createElement("h2",null,"A-Star Search Algorithm"),o.a.createElement("div",{className:"algorithm"},"The A-Star, or A-*, search is a path-finding algorithm that is known for its efficiency. The cost of a path is determined by the sum of the distance from the starting node and the estimated remaining distance to the destination node. The algorithm builds new routes by looking at the neighbor nodes at the end of the best existing routes and uses a priority queue to sort routes until it finds the route with the lowest cost.")))},L=a(39),q=a.n(L),B=function(e){var t=e.history,a=Object(n.useContext)(f),r=Object(n.useState)(JSON.stringify(a.scenarioData,null,2)),i=Object(l.a)(r,2),c=i[0],s=i[1],d=Object(n.useState)(void 0),u=Object(l.a)(d,2),m=u[0],p=u[1];return o.a.createElement("div",null,o.a.createElement("h1",null,"Settings:"),o.a.createElement("p",null,"Enter new node data:"),o.a.createElement("div",null,o.a.createElement("textarea",{className:(m?"errorsFound ":"")+"scenarioData",value:c,onChange:function(e){return s(e.target.value)},placeholder:"Please Enter JSON data"})),o.a.createElement("button",{onClick:function(){p(void 0);try{var e=q.a.parse(c);console.log("settings:parseJsonInfo jsonObject:",e),a.setScenarioData(e),a.setGraphData(g(h(e))),t.push("/")}catch(n){console.error("Not a valid JSON",n),p(n)}}},"Submit Node Data"),o.a.createElement("div",{className:"errorMessage"},!m||m.toString()))},J=function(e){function t(){return Object(S.a)(this,t),Object(M.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return o.a.createElement("h1",null,"not found!")}}]),t}(o.a.Component),z=function(){return o.a.createElement("div",{id:"app"},o.a.createElement(y,null,o.a.createElement(c.a,null,o.a.createElement(C,null,o.a.createElement(s.c,null,o.a.createElement(s.a,{exact:!0,path:"/",component:D}),o.a.createElement(s.a,{exact:!0,path:"/settings",component:B}),o.a.createElement(s.a,{exact:!0,path:"/about",component:I}),o.a.createElement(s.a,{component:J}))))))},W=document.getElementById("root");i.a.render(o.a.createElement(z,null),W)}},[[40,1,2]]]);
//# sourceMappingURL=main.757eebae.chunk.js.map